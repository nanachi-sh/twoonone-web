"use strict";(self["webpackChunkuno_web"]=self["webpackChunkuno_web"]||[]).push([[827],{2827:function(e,l,o){o.r(l),o.d(l,{default:function(){return V}});var a=o(6768),u=o(144),r=o(4232),d=o(2249),t=o(3966);const n={key:0,style:{display:"none"}},f={key:1},m={key:0},i={key:1};var s=(0,a.pM)({__name:"UserLoginView",setup(e){const l=(0,u.KR)({loginFrom:"FromWeb",fromWeb:{userName:"",userId:"web"+(0,d.GenerateRandomString)(10)},fromQQ:{qqId:"",qqSendVerify:!1,qqVerifyCode:"",qqVerifyHash:""}});async function o(){if(""==l.value.fromQQ.qqId)return void(b.value=!0);const e=await(0,d.GetVerifyCode)(l.value.fromQQ.qqId);if("object"!=typeof e)switch(e){default:console.log(`未处理错误：${d.QQVerifier_Errors[e]}`)}else l.value.fromQQ.qqVerifyHash=e.VerifyHash}function s(){const e=l.value.fromWeb;""!=e.userName&&""!=e.userId&&((0,d.LD)({Id:e.userId,Name:e.userName,Type:d.AccountTypes.Temp}),(0,d.UpdateUserInfoFromLocalStorage)(),v.value=!0)}async function c(){const e=l.value.fromQQ;if(""==e.qqVerifyHash||""==e.qqVerifyCode)return;const o=await(0,d.PutVerifyCode)(e.qqVerifyHash,e.qqVerifyCode);if("object"==typeof o||o===d.QQVerifier_Errors.Errors_ErrVerified){if("object"!=typeof o||"Verified"==o.result){const l=await(0,d.GetUser)({UserId:e.qqId,method:"",VerifyCode:{VerifyHash:e.qqVerifyHash,VerifySource:"QQ"}});if("object"!=typeof l){switch(l){default:console.log(`未处理错误：${d.UNO_Errors[l]}`)}return}(0,d.LD)({Id:l.UserInfo.Id,Name:l.UserInfo.Name,Hash:l.UserHash,Type:d.AccountTypes.Normal}),(0,d.UpdateUserInfoFromLocalStorage)(),v.value=!0}}else switch(o){default:console.log(`未处理错误：${d.QQVerifier_Errors[o]}`)}}const V=(0,u.KR)(!1),b=(0,u.KR)(!1),v=(0,u.KR)(!1);return(e,Q)=>{const q=(0,a.g2)("ElInput"),y=(0,a.g2)("ElFormItem"),F=(0,a.g2)("ElButton"),p=(0,a.g2)("ElRadio"),h=(0,a.g2)("ElRadioGroup"),k=(0,a.g2)("ElForm");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(t.A,{"-body":"QQ号不能为空",modelValue:b.value,"onUpdate:modelValue":Q[0]||(Q[0]=e=>b.value=e)},null,8,["modelValue"]),(0,a.bF)(t.A,{"-body":"你已登录",modelValue:V.value,"onUpdate:modelValue":Q[1]||(Q[1]=e=>V.value=e),"-close-action":()=>{(0,u.R1)(d.Td)()}},null,8,["modelValue","-close-action"]),(0,a.bF)(t.A,{"-body":"登录成功",modelValue:v.value,"onUpdate:modelValue":Q[2]||(Q[2]=e=>v.value=e),"-close-action":()=>{(0,u.R1)(d.Z8)()}},null,8,["modelValue","-close-action"]),Q[3]||((0,a.Vq)(-1,!0),(Q[3]=null!==(0,u.R1)(d.Hn)?((0,a.uX)(),(0,a.CE)("div",n,[(0,a.eW)((0,r.v_)(V.value=!0),1)])):((0,a.uX)(),(0,a.CE)("div",f,[(0,a.bF)(k,null,{default:(0,a.k6)((()=>["FromWeb"==l.value.loginFrom?((0,a.uX)(),(0,a.CE)("div",m,[(0,a.bF)(y,{label:"玩家ID："},{default:(0,a.k6)((()=>[(0,a.bF)(q,{modelValue:l.value.fromWeb.userId,"onUpdate:modelValue":Q[4]||(Q[4]=e=>l.value.fromWeb.userId=e),disabled:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(y,{label:"玩家名称："},{default:(0,a.k6)((()=>[(0,a.bF)(q,{modelValue:l.value.fromWeb.userName,"onUpdate:modelValue":Q[5]||(Q[5]=e=>l.value.fromWeb.userName=e),maxlength:"12",placeholder:"请输入你的名称","show-word-limit":""},null,8,["modelValue"])])),_:1})])):((0,a.uX)(),(0,a.CE)("div",i,[(0,a.bF)(y,{label:"QQ号："},{default:(0,a.k6)((()=>[(0,a.bF)(q,{modelValue:l.value.fromQQ.qqId,"onUpdate:modelValue":Q[6]||(Q[6]=e=>l.value.fromQQ.qqId=e),maxlength:"10",placeholder:"请输入你的QQ号"},null,8,["modelValue"]),(0,a.bF)(F,{onClick:o},{default:(0,a.k6)((()=>Q[11]||(Q[11]=[(0,a.eW)("发送确认码")]))),_:1})])),_:1}),(0,a.bF)(y,{label:"确认码："},{default:(0,a.k6)((()=>[(0,a.bF)(q,{modelValue:l.value.fromQQ.qqVerifyCode,"onUpdate:modelValue":Q[7]||(Q[7]=e=>l.value.fromQQ.qqVerifyCode=e),maxlength:"6",placeholder:"请输入机器人私信发送的确认码"},null,8,["modelValue"])])),_:1})])),(0,a.bF)(y,{label:"登录源："},{default:(0,a.k6)((()=>[(0,a.bF)(h,{modelValue:l.value.loginFrom,"onUpdate:modelValue":Q[8]||(Q[8]=e=>l.value.loginFrom=e)},{default:(0,a.k6)((()=>[(0,a.bF)(p,{value:"FromWeb"},{default:(0,a.k6)((()=>Q[12]||(Q[12]=[(0,a.eW)("临时玩家")]))),_:1}),(0,a.bF)(p,{value:"FromQQ"},{default:(0,a.k6)((()=>Q[13]||(Q[13]=[(0,a.eW)("QQ")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,a.bF)(F,{onClick:Q[9]||(Q[9]=()=>{"FromWeb"==l.value.loginFrom?s():"FromQQ"==l.value.loginFrom&&c()})},{default:(0,a.k6)((()=>Q[14]||(Q[14]=[(0,a.eW)("登录")]))),_:1}),(0,a.bF)(F,{onClick:Q[10]||(Q[10]=e=>(0,u.R1)(d.Td)())},{default:(0,a.k6)((()=>Q[15]||(Q[15]=[(0,a.eW)("返回")]))),_:1})])),_:1})]))).cacheIndex=3,(0,a.Vq)(1),Q[3])],64)}}});const c=s;var V=c}}]);
//# sourceMappingURL=827.18e19514.js.map