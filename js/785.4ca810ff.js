"use strict";(self["webpackChunkuno_web"]=self["webpackChunkuno_web"]||[]).push([[785],{4173:function(e,r,t){t.d(r,{PX:function(){return n},S8:function(){return o},mp:function(){return s}});var a=t(2169);const n=e=>{switch(e){case a._.RoomStage.ROOM_STAGE_WAITTING_START:return"等待开始";case a._.RoomStage.ROOM_STAGE_SENDING_CARD:return"游戏中";case a._.RoomStage.ROOM_STAGE_ROB_LANDOWNERING:return"游戏中";default:return"未知状态"}},o=e=>{switch(e){case a._.Role.ROLE_FARMER:return"农民";case a._.Role.ROLE_LANDOWNER:return"地主";case a._.Role.ROLE_UNKNOWN:return"无"}},s=e=>{switch(e){case a._.api.Error.ERROR_UNKNOWN:return"未知错误";case a._.api.Error.ERROR_UNDEFINED:return"未知错误";case a._.api.Error.ERROR_INVALID_ARGUMENT:return"异常输入范围，未知错误";case a._.api.Error.ERROR_NO_AUTH:return"鉴权失败，可能是未登录账号";case a._.api.Error.ERROR_USER_NO_EXIST:return"用户不存在";case a._.api.Error.ERROR_USER_INCOMPLETE:return"用户信息不完整";case a._.api.Error.ERROR_USER_EXISTED:return"用户已存在";case a._.api.Error.ERROR_ROOM_FULL:return"房间已满";case a._.api.Error.ERROR_ROOM_NO_EXIST:return"房间不存在";case a._.api.Error.ERROR_ROOM_EXIST_PLAYER:return"你已在房间内";case a._.api.Error.ERROR_ROOM_NO_EXIST_PLAYER:return"你不在房间内";case a._.api.Error.ERROR_ROOM_NO_ROB_LANDOWNERING:return"房间还未到抢地主阶段";case a._.api.Error.ERROR_ROOM_NO_SENDING_CARD:return"房间还未到出牌阶段";case a._.api.Error.ERROR_PLAYER_CARD_NO_EXIST:return"你的手牌不足";case a._.api.Error.ERROR_PLAYER_NO_OPERATOR:return"还未轮到你操作";case a._.api.Error.ERROR_PLAYER_NO_EXIST:return"玩家不存在";case a._.api.Error.ERROR_PLAYER_ALREADY_GET_DALIY_COIN:return"你已领取过每日豆子";case a._.api.Error.ERROR_ROOM_NO_FULL:return"房间还未满";case a._.api.Error.ERROR_ROOM_STARTED:return"房间已开始游戏";case a._.api.Error.ERROR_ROOM_NO_ROB_LANDOWNER:return"没有人抢地主";case a._.api.Error.ERROR_SEND_CARD_TYPE_UNKNOWN:return"你的牌类型未知";case a._.api.Error.ERROR_SEND_CARD_TYPE_NE_LAST_CARD_TYPE:return"你的牌类型与上一轮的不符";case a._.api.Error.ERROR_SEND_CARD_CONTINUOUS_NE_LAST_CARD_CONTINUOUS:return"你的牌连续数与上一轮的不同";case a._.api.Error.ERROR_SEND_CARD_SIZE_LE_LAST_CARD_SIZE:return"你的牌比不过上一轮的大小";case a._.api.Error.ERROR_PLAYER_EXISTED_A_ROOM:return"你已在一个房间内";case a._.api.Error.ERROR_PLAYER_COIN_LT_ROOM_COIN:return"你的豆子低于房间底分";case a._.api.Error.ERROR_PLAYER_IS_ONLY_OPERATOR:return"你是唯一一个可以操作的玩家"}}},4785:function(e,r,t){t.r(r),t.d(r,{default:function(){return ae}});var a=t(6768),n=t(144),o=t(1387),s=(t(4114),t(8992),t(4520),t(2577),t(4232)),l=t(2249),i=t(8638),u=t(4173);t(6573),t(8100),t(7936),t(7467),t(4732),t(9577),t(3949),t(1454),t(4979);const c="function"===typeof Buffer,d="function"===typeof TextDecoder?new TextDecoder:void 0,_=("function"===typeof TextEncoder&&new TextEncoder,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),R=Array.prototype.slice.call(_),f=(e=>{let r={};return e.forEach(((e,t)=>r[e]=t)),r})(R),b=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,m=String.fromCharCode.bind(String),E="function"===typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),p=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),N=e=>{let r,t,a,n,o="";const s=e.length%3;for(let l=0;l<e.length;){if((t=e.charCodeAt(l++))>255||(a=e.charCodeAt(l++))>255||(n=e.charCodeAt(l++))>255)throw new TypeError("invalid character found");r=t<<16|a<<8|n,o+=R[r>>18&63]+R[r>>12&63]+R[r>>6&63]+R[63&r]}return s?o.slice(0,s-3)+"===".substring(s):o},h=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,O=e=>{switch(e.length){case 4:var r=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),t=r-65536;return m(55296+(t>>>10))+m(56320+(1023&t));case 3:return m((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return m((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},g=e=>e.replace(h,O),k=e=>{if(e=e.replace(/\s+/g,""),!b.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let r,t,a,n="";for(let o=0;o<e.length;)r=f[e.charAt(o++)]<<18|f[e.charAt(o++)]<<12|(t=f[e.charAt(o++)])<<6|(a=f[e.charAt(o++)]),n+=64===t?m(r>>16&255):64===a?m(r>>16&255,r>>8&255):m(r>>16&255,r>>8&255,255&r);return n},y="function"===typeof atob?e=>atob(p(e)):c?e=>Buffer.from(e,"base64").toString("binary"):k,C=c?e=>E(Buffer.from(e,"base64")):e=>E(y(e).split("").map((e=>e.charCodeAt(0)))),w=c?e=>Buffer.from(e,"base64").toString("utf8"):d?e=>d.decode(C(e)):e=>g(y(e)),S=e=>p(e.replace(/[-_]/g,(e=>"-"==e?"+":"/"))),v=e=>w(S(e)),A=e=>F(e).federated_claims.user_id,F=e=>{const r=v(e.split(".")[1]);return JSON.parse(r)};var x=t(3966),T=t(2169),I=t(3851),L=t(4880),D=t(4418),$=t(5583),W=t(47),M=t(683),P=t(4253),G=t(7962),U=t(753);const B={key:0},K={key:0},X={key:1},z={key:1},Y=["id","is_rtl"],V={key:0},q={key:1},H=20,Z=648;var j;(function(e){e[e["normal"]=0]="normal",e[e["mini"]=1]="mini"})(j||(j={}));var J=(0,a.pM)({__name:"RoomDetailViewAsync",props:{room_hash:{}},async setup(e){let r,t;const o=e,[c,d]=[(0,n.KR)(""),(0,n.KR)(!1)],_=async()=>{await b()},R=async(e,r="top-left",t="info")=>{setTimeout((()=>{(0,I.df)({title:"提示",message:e,position:r,type:t})}),H)},f=()=>{removeEventListener("resize",k),k(),addEventListener("resize",k),removeEventListener("resize",C),C(),addEventListener("resize",C)},b=async()=>{const e=await(0,i.kj)(T._.GetRoomRequest.create({room_hash:o.room_hash}));if("number"===typeof e){switch(e){default:R((0,u.mp)(e),void 0,"error")}return void console.error(e)}const r=e.room_info;r.self?.extra?.hand_cards?.sort(((e,r)=>e.number-r.number)),Object.assign(Ne,e.room_info),he.value&&f()},m=async()=>{const e=await(0,i.yP)(T._.ExitRoomRequest.create({room_hash:o.room_hash}));if("number"===typeof e)return R((0,u.mp)(e),void 0,"error"),void console.error(e)},E=async()=>{const e=await(0,i.YO)(T._.ExitRoomRequest.create({room_hash:o.room_hash}));if("number"===typeof e)return R((0,u.mp)(e),void 0,"error"),void console.error(e);await b()},p=async()=>{if(3!==Ne.player_infos?.length)return c.value="桌内玩家数未满",void(d.value=!0);const e=await(0,i.SI)(T._.StartRoomRequest.create({room_hash:o.room_hash}));return"number"===typeof e?(R((0,u.mp)(e),void 0,"error"),void console.error(e)):void 0},N=async()=>{const e=await(0,i.Ge)(T._.RobLandownerRequest.create({room_hash:Ne.hash}));if("number"!==typeof e);else{switch(e){case T._.api.Error.ERROR_ROOM_NO_ROB_LANDOWNER:break;default:R((0,u.mp)(e),void 0,"error")}console.error(e)}},h=async()=>{const e=await(0,i.ZD)(T._.NoRobLandownerRequest.create({room_hash:Ne.hash}));if("number"!==typeof e);else{switch(e){case T._.api.Error.ERROR_ROOM_NO_ROB_LANDOWNER:break;default:R((0,u.mp)(e),void 0,"error")}console.error(e)}},O=async e=>{if(0===e.length)return;S();const r=await(0,i.d0)(T._.SendCardRequest.create({room_hash:Ne.hash,sendcards:e}));return"number"===typeof r?(R((0,u.mp)(r),void 0,"error"),void console.error(r)):void 0},g=async()=>{S();const e=await(0,i.EE)(T._.NoSendCardRequest.create({room_hash:Ne.hash}));if("number"===typeof e)return R((0,u.mp)(e),void 0,"error"),void console.error(e)},k=()=>{if(Ne.self){const e=window.innerWidth<=Z?j.mini:j.normal,r=Ne.self.extra?.hand_cards;if(!r)return;const t=document.getElementById("footer");if(null===t)return;const a=.98*Number(window.getComputedStyle(t).width.replace("px","")),n=Number(window.getComputedStyle(t).height.replace("px",""));Ee(r,"svg_self_cards",{width:a,height:n,self:!0,r2l:!1,size:e})}},y=()=>{if(!Ne.player_infos)return;for(const r of Ne.player_infos){const e=document.getElementById(`svg_${r.user?.id}_send_cards`);if(e)for(const r of e.children)e.removeChild(r)}const e=document.getElementById("svg_self_send_cards");if(e)for(const r of e.children)e.removeChild(r)},C=()=>{const e=Ne.sendcards?.at(Ne.sendcards.length-1);if(!e)return;if(e.sender_info?.user?.id===Ne.self?.user?.id)return y(),void Ee(e.sendcards,"svg_self_send_cards",{self:!1,r2l:!1,size:j.mini});let r=!1;for(const t of Ne.player_infos.filter((e=>e.user?.id!==Ne.self?.user?.id))){const a=document.getElementById(`svg_${t.user?.id}_send_cards`);a&&e.sender_info?.user?.id===t.user?.id&&(r="true"===a.getAttribute("is_rtl"))}y(),Ee(e.sendcards,`svg_${e.sender_info.user.id}_send_cards`,{self:!1,r2l:r,size:j.mini})},w=()=>{const e=document.getElementById("svg_self_cards")?.children.item(0);if(!e)return[];const r=[];for(const t of e.children){if(null===t.getAttribute("card_selected"))continue;const e=t.getAttribute("xlink:href")?.split("#").at(1);if(void 0===e)continue;const a=Re(e);null!==a&&r.push(a)}return r},S=()=>{const e=document.getElementById("svg_self_cards")?.children.item(0);if(e)for(const r of e.children){if(null===r.getAttribute("card_selected"))continue;const e=new MouseEvent("mousedown",{buttons:1});r.dispatchEvent(e)}},v=async()=>{const e=await(0,i.u9)();"number"!==typeof e?Oe=e:console.error(e)},F=async()=>{if(Oe){for await(const e of Oe){const r=e;if(console.log(e),r.RoblandownerIntoSendingcard){const e=r.RoblandownerIntoSendingcard;R(`${e.sendcarder_info?.user?.name} 当上了地主`),await b()}else if(r.RoblandownerContinuousRob){const e=r.RoblandownerContinuousRob;R(`连抢地主！当前倍率：${e.multiple}`)}else if(r.SendcardSpringNotice){const e=r.SendcardSpringNotice;R(`春天！${e.sendcarder_info?.user?.name} 拿下了春天，当前倍率：${e.multiple}`)}else if(r.SendcardBoomNotice){const e=r.SendcardBoomNotice;R(`炸弹！${e.sendcarder_info?.user?.name} 打出了炸弹，当前倍率：${e.multiple}`)}else if(r.SendcardKingboomNotice){const e=r.SendcardKingboomNotice;R(`王炸！${e.sendcarder_info?.user?.name} 打出了王炸，当前倍率：${e.multiple}`)}else if(r.GameFinish){const e=r.GameFinish;await b(),R(`游戏结束，${(0,u.S8)(e.Winner)} 获胜`)}else if(r.SendcardCardnumberNotice){const e=r.SendcardCardnumberNotice;R(`${e.notice_target_info?.user?.name} 就剩 ${e.number} 张牌了！`)}else if(r.RoomJoinPlayer){const e=r.RoomJoinPlayer;Ne.player_infos=e.player_infos,R(`${e.joiner_info?.user?.name} 加入了房间`)}else if(r.RoomExitPlayer){const e=r.RoomExitPlayer;Ne.player_infos=e.player_infos,R(`${e.leaver_info?.user?.name} 离开了房间`)}else if(r.RoomStarted){const e=r.RoomStarted;let t="";t+="游戏开始",e.next_operator_info?.user?.id===Ne.self?.user?.id?t+="，从你开始抢地主":t+=`，从 ${e.next_operator_info?.user?.name} 开始抢地主`,R(t),await b(),f()}else if(r.RoomRobLandowner){const e=r.RoomRobLandowner;await b();let t="";e.operator_info?.user?.id!==Ne.self?.user?.id&&(t=`${e.operator_info?.user?.name} 选择抢地主`,e.next_operator_info?.user?.id===Ne.self?.user?.id?t+="，轮到你抢地主了":t+=void 0!==e.next_operator_info?`，接下来轮到 ${e.next_operator_info?.user?.name} 抢地主了`:""),""!==t&&R(t)}else if(r.RoomNorobLandowner){const e=r.RoomNorobLandowner;await b();let t="";e.operator_info?.user?.id!==Ne.self?.user?.id&&(t=`${e.operator_info?.user?.name} 选择不抢地主`,e.next_operator_info?.user?.id===Ne.self?.user?.id?t+="，轮到你抢地主了":t+=void 0!==e.next_operator_info?`，接下来轮到 ${e.next_operator_info?.user?.name} 抢地主了`:""),""!==t&&R(t)}else if(r.RoomSendcard){r.RoomSendcard;await b(),C()}else if(r.RoomNoSendcard){r.RoomNoSendcard;await b()}else if(r.RoomReRoblandowner){r.RoomReRoblandowner;let e="";e+="无人抢地主，重新发牌",R(e),await b()}else console.error("is undefined",r)}console.log("exit"),Oe=void 0}},J=()=>3,Q=()=>.5,[ee,re,te,ae,ne,oe,se]=[170,246,10,2,Q(),J(),20],[le,ie,ue]=[50,80,22],ce=e=>{let[r,t]=[0,0];switch(e){case j.normal:r=ee,t=re;break;case j.mini:r=le,t=ie;break}return{basic_x:r,basic_y:t}},de=(e,r,t)=>{const a=ce(t),[n,o]=[a.basic_x,a.basic_y];return[-1!==e?e*(n+ae):window.innerWidth,0===r?o+se:(r+1)*(o+ae+se)]},_e=(e,r,t,a={max_col:-1,scale:1,r2l:!1,is_self:!0,size:j.normal})=>{const[n,o,s,l,i]=[a.max_col??-1,a.scale??1,a.r2l??!1,a.is_self??!0,a.size];let[u,c]=[0,0];{const e=ce(i);u=e.basic_x,c=e.basic_y}const d="http://www.w3.org/2000/svg",_="http://www.w3.org/1999/xlink",R=document.createElementNS(d,"svg");let[f,b]=[0,0];for(const[p,N]of e.entries()){const e=be(N.card,i);if(void 0===e){console.error("card position is undefined");continue}const[r,t]=e;let[a,o]=[0,0];switch(i){case j.normal:a=1+~(r-(u*b+ae*b)),o=1+~(t-(c*f+ae*f)/oe),-1!==n&&b+1>n&&(f++,b=0,a=1+~(r-(u*b+ae*b)),o=1+~(t-(c*f+ae*f)/oe)),b++;break;case j.mini:a=l?1+~(r-(u*b-(u-ue)*b)):1+~(r-u*b),o=1+~(t-c*f),-1!==n&&b+1>n&&(f++,b=0,a=1+~(r-u*b),o=1+~(t-c*f)),l||(o-=se),b++;break}const m=fe(N.card);if(void 0===m){console.error("card id is undefined");continue}const E=document.createElementNS(d,"use");switch(N.select&&(o+=se,E.setAttribute("card_selected","")),i){case j.normal:E.setAttributeNS(_,"xlink:href",`/static/img/card.svg#${m}`);break;case j.mini:E.setAttributeNS(_,"xlink:href",`/static/img/card_mini.svg#${m}`)}if(l){const e=e=>{let r=e.style.getPropertyValue("transform");const t=r.match(/(?:translate\()([\d\-.]+)(?:px)(?:, )?([\d\-.]+)?(?:px)?(?:\))/);let[a,n]=[Number(t?.at(1)),t?.at(2)?Number(t?.at(2)):0];r=r.split(/translate\(.*\)/).at(1);const o=null!==e.getAttribute("card_selected");o?(n+=se,e.removeAttribute("card_selected")):(n-=se,e.setAttribute("card_selected","")),e.style.setProperty("transform",`${r} translate(${a}px, ${n}px)`)};E.onmousedown=r=>{1===r.buttons&&e(E)},E.onmouseenter=r=>{1===r.buttons&&e(E)}}s?(E.style.setProperty("transform",`translate(${a}px, ${o}px) rotate3d(0, 1, 0, 180deg)`),E.style.setProperty("transform-origin",`${Math.abs(r)+25}px 0px 0px`)):E.style.setProperty("transform",`translate(${a}px, ${o}px)`),R.appendChild(E)}const[m,E]=de(-1===n?b:n,f,i);if(R.classList.add("svg_card"),R.setAttribute("width",`${0===m?r/o:m}px`),R.setAttribute("height",`${E}px`),s&&R.style.setProperty("direction","ltr"),1!==o||s){let[e,r]=[0,0];l||(e=s?50:-10),R.style.setProperty("transform",`scale(${o}) ${!0===s?"rotate3d(0, 1, 0, 180deg)":""}`),R.style.setProperty("transform-origin",`${e}% ${r}%`)}return R},Re=e=>{const[r,t]=e.split("_"),a={};switch(t){case"1":a.number=T._.Card.Number.A;break;case"2":a.number=T._.Card.Number.TWO;break;case"3":a.number=T._.Card.Number.THREE;break;case"4":a.number=T._.Card.Number.FOUR;break;case"5":a.number=T._.Card.Number.FIVE;break;case"6":a.number=T._.Card.Number.SIX;break;case"7":a.number=T._.Card.Number.SEVEN;break;case"8":a.number=T._.Card.Number.EIGHT;break;case"9":a.number=T._.Card.Number.NINE;break;case"10":a.number=T._.Card.Number.TEN;break;case"jack":a.number=T._.Card.Number.J;break;case"queen":a.number=T._.Card.Number.Q;break;case"king":a.number=T._.Card.Number.K;break;case"joker":switch(r){case"red":a.number=T._.Card.Number.KING;break;case"black":a.number=T._.Card.Number.JOKER;break}break;default:return null}return a},fe=e=>{switch(e.number){case T._.Card.Number.UNKNOWN:return"back";case T._.Card.Number.THREE:return"club_3";case T._.Card.Number.FOUR:return"club_4";case T._.Card.Number.FIVE:return"club_5";case T._.Card.Number.SIX:return"club_6";case T._.Card.Number.SEVEN:return"club_7";case T._.Card.Number.EIGHT:return"club_8";case T._.Card.Number.NINE:return"club_9";case T._.Card.Number.TEN:return"club_10";case T._.Card.Number.J:return"club_jack";case T._.Card.Number.Q:return"club_queen";case T._.Card.Number.K:return"club_king";case T._.Card.Number.A:return"club_1";case T._.Card.Number.TWO:return"club_2";case T._.Card.Number.JOKER:return"black_joker";case T._.Card.Number.KING:return"red_joker"}},be=(e,r)=>{const t=ce(r),[a,n]=[t.basic_x,t.basic_y];switch(e.number){case T._.Card.Number.UNKNOWN:return[2*(a+te),4*(n+te)];case T._.Card.Number.THREE:return[2*(a+te),0];case T._.Card.Number.FOUR:return[3*(a+te),0];case T._.Card.Number.FIVE:return[4*(a+te),0];case T._.Card.Number.SIX:return[5*(a+te),0];case T._.Card.Number.SEVEN:return[6*(a+te),0];case T._.Card.Number.EIGHT:return[7*(a+te),0];case T._.Card.Number.NINE:return[8*(a+te),0];case T._.Card.Number.TEN:return[9*(a+te),0];case T._.Card.Number.J:return[10*(a+te),0];case T._.Card.Number.Q:return[11*(a+te),0];case T._.Card.Number.K:return[12*(a+te),0];case T._.Card.Number.A:return[0,0];case T._.Card.Number.TWO:return[a+te,0];case T._.Card.Number.JOKER:return[0,4*(n+te)];case T._.Card.Number.KING:return[a+te,4*(n+te)];default:return}},me=(e,r,t,a={min_scale:ne})=>{const[n,o]=[a.min_scale,a.self??!1];let[s,l]=[0,0];const i=ce(t);s=i.basic_x,l=i.basic_y;let[u]=[(s+ae)*e];console.log(e,s,u,r,n);const c=l+se;if(!(u<=r)&&u>r){let a,l=1;if(l=r/u,a=e,l<n)while(l<n)a--,u=o&&t===j.mini?(s-(s-ue))*(a+1.35):(s+ae)*a,l=r/u;const i=u*l;let d=0,_=1+~~(e/(a??1));if(_=_===e+1?1:_,1===_)d=c*(l+.015);else{const e=c*(l+.015);d=o&&t===j.normal?e/oe*(_-1)+e:e*_}return console.log(l,i,d,a),{scale:l,top_x:i,top_y:d,max_col:a}}},Ee=(e,r,t={self:!0,r2l:!1,size:j.normal})=>{const[a,n,o,s,l]=[t.width,t.height,t.self??!0,t.r2l??!1,t.size],i=document.getElementById(r);if(null===i)return;i.style.removeProperty("width"),i.style.removeProperty("height"),i.style.removeProperty("overflow");const u=a??Number(window.getComputedStyle(i).width.replaceAll("px","")),c=n??window.innerHeight;let d,_=me(e.length,u,l,{min_scale:l===j.normal?ne:.85,self:o});o||l!==j.mini||(_=me(e.length,u,l,{min_scale:.75,self:o}));const R=[];if(o){const r=w();for(const t of e){const e={card:t,select:!1};for(const[a,n]of r.entries())if(t.number===n.number){e.select=!0,r.splice(a,1);break}R.push(e)}}else for(const f of e){const e={card:f,select:!1};R.push(e)}void 0===_?d=_e(R,u,c,{r2l:s,is_self:o,size:l}):(i.style.setProperty("width",`${_.top_x}px`),i.style.setProperty("height",`${_.top_y}px`),d=_e(R,u,c,{scale:_.scale,max_col:_.max_col,r2l:s,is_self:o,size:l})),0===i.children.length?i.appendChild(d):i.replaceChild(d,i.children[0])},pe=e=>{if(Ne)switch(Ne.stage){case T._.RoomStage.ROOM_STAGE_ROB_LANDOWNERING:return e.user?.id===Ne.operator_now?.user?.id?"抢地主中":"等待抢地主";case T._.RoomStage.ROOM_STAGE_SENDING_CARD:return e.user?.id===Ne.operator_now?.user?.id?"出牌中":"等待出牌"}},Ne=(0,n.Kh)({}),he=(0,n.KR)(!1);let Oe;return(0,a.wB)(Ne,(e=>{e.player_infos?.find((e=>e.user?.id===A(l.Hn.value?.access_token??"")))?void 0===Oe&&v().then((()=>F().catch((e=>console.error(e))))).catch((e=>console.error(e))):Oe=void 0})),(0,a.wB)(he,(()=>{f()}),{once:!0}),[r,t]=(0,a.E)((()=>_())),await r,t(),(0,a.sV)((()=>he.value=!0)),(e,r)=>{const t=(0,a.g2)("ElTableColumn"),o=(0,a.g2)("ElTable");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(x.A,{"-body":(0,n.R1)(c),modelValue:(0,n.R1)(d),"onUpdate:modelValue":r[0]||(r[0]=e=>(0,n.i9)(d)?d.value=e:null)},null,8,["-body","modelValue"]),Ne.stage===(0,n.R1)(T._).RoomStage.ROOM_STAGE_WAITTING_START?((0,a.uX)(),(0,a.CE)("div",B,[(0,a.bF)((0,n.R1)(L.lX),null,{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(L.bZ),null,{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(D.S2),null,{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)($.sI),null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,[Ne.player_infos?.find((e=>e.user?.id===(0,n.R1)(A)((0,n.R1)(l.Hn)?.access_token??"")))?((0,a.uX)(),(0,a.CE)("div",K,[(0,a.bF)((0,n.R1)(W.S2),{onClick:r[1]||(r[1]=e=>m())},{default:(0,a.k6)((()=>r[5]||(r[5]=[(0,a.eW)("退出桌")]))),_:1})])):((0,a.uX)(),(0,a.CE)("div",X,[(0,a.bF)((0,n.R1)(W.S2),{onClick:r[2]||(r[2]=e=>E())},{default:(0,a.k6)((()=>r[6]||(r[6]=[(0,a.eW)("加入桌")]))),_:1})]))]),(0,a.Lk)("div",null,[(0,a.bF)((0,n.R1)(W.S2),{onClick:r[3]||(r[3]=e=>p())},{default:(0,a.k6)((()=>r[7]||(r[7]=[(0,a.eW)("开始游戏")]))),_:1})])])),_:1})])),_:1})])),_:1}),(0,a.bF)((0,n.R1)(L.ZO),null,{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)($.sI),{direction:"vertical",fill:""},{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(M.Ik),null,{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(P.$g),null,{default:(0,a.k6)((()=>[(0,a.eW)("桌哈希："+(0,s.v_)(Ne.hash),1)])),_:1}),(0,a.bF)(o,{data:Ne.player_infos},{default:(0,a.k6)((()=>[(0,a.bF)(t,{label:"玩家ID",prop:"user.id"}),(0,a.bF)(t,{label:"玩家名称",prop:"user.name"})])),_:1},8,["data"])])),_:1})])),_:1})])),_:1})])),_:1})])):((0,a.uX)(),(0,a.CE)("div",z,[(0,a.bF)((0,n.R1)(L.lX),null,{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(L.bZ),{style:{height:"40vh",width:"95vw",padding:"0",overflow:"hidden"}},{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(D.S2),{justify:"space-between"},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(Ne.player_infos?.filter((e=>e.user?.id!==Ne.self?.user?.id)),((e,r)=>((0,a.uX)(),(0,a.Wv)((0,n.R1)(G.uD),{span:24/(void 0!==Ne.player_infos?.length?Ne.player_infos?.length-1:1),key:e.user.id},{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(D.S2),{style:(0,s.Tr)(1===(1&r)?"direction: rtl;":"")},{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(G.uD),{span:10,xs:12},{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(U.TS),{column:1,border:""},{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(U.MF),{label:"玩家"},{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(P.$g),null,{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(e.user?.name),1)])),_:2},1024)])),_:2},1024),(0,a.bF)((0,n.R1)(U.MF),{label:"身份"},{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(P.$g),null,{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)((0,n.R1)(u.S8)(e.table?.role??(0,n.R1)(T._).Role.ROLE_UNKNOWN)),1)])),_:2},1024)])),_:2},1024),(0,a.bF)((0,n.R1)(U.MF),{label:"剩余手牌"},{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(P.$g),null,{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(e.table?.cards_length),1)])),_:2},1024)])),_:2},1024),(0,a.bF)((0,n.R1)(U.MF),{label:"状态"},{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(P.$g),null,{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(pe(e)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,a.bF)((0,n.R1)(G.uD),{span:14,xs:12},{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(D.S2),null,{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(G.uD),{span:1}),(0,a.bF)((0,n.R1)(G.uD),{span:23},{default:(0,a.k6)((()=>[(0,a.Lk)("div",{id:`svg_${e.user?.id}_send_cards`,is_rtl:1===(1&r)},null,8,Y)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["style"])])),_:2},1032,["span"])))),128))])),_:1})])),_:1}),(0,a.bF)((0,n.R1)(L.LK),{id:"footer",style:{padding:"0",height:"50vh",width:"95vw",overflow:"hidden"}},{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(D.S2),null,{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(G.uD),null,{default:(0,a.k6)((()=>r[8]||(r[8]=[(0,a.Lk)("div",{id:"svg_self_send_cards",style:{"text-align":"center"}},null,-1)]))),_:1})])),_:1}),(0,a.bF)((0,n.R1)(D.S2),null,{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(G.uD),{span:8,xs:8,sm:7,md:5,lg:4,xl:3},{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(U.TS),{column:1,border:""},{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(U.MF),{label:"玩家"},{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(P.$g),null,{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(Ne.self?.user?.name),1)])),_:1})])),_:1}),(0,a.bF)((0,n.R1)(U.MF),{label:"身份"},{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(P.$g),null,{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)((0,n.R1)(u.S8)(Ne.self?.table?.role??(0,n.R1)(T._).Role.ROLE_UNKNOWN)),1)])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.bF)((0,n.R1)(G.uD),{offset:6,span:10},{default:(0,a.k6)((()=>[Ne.stage===(0,n.R1)(T._).RoomStage.ROOM_STAGE_ROB_LANDOWNERING?((0,a.uX)(),(0,a.CE)("div",V,[(0,a.bF)((0,n.R1)(W.fg),{size:"large"},{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(W.S2),{disabled:Ne.operator_now?.user?.id!==Ne.self?.user?.id,onClick:N},{default:(0,a.k6)((()=>r[9]||(r[9]=[(0,a.eW)("抢地主")]))),_:1},8,["disabled"]),(0,a.bF)((0,n.R1)(W.S2),{disabled:Ne.operator_now?.user?.id!==Ne.self?.user?.id,onClick:h},{default:(0,a.k6)((()=>r[10]||(r[10]=[(0,a.eW)("不抢地主")]))),_:1},8,["disabled"])])),_:1})])):Ne.stage===(0,n.R1)(T._).RoomStage.ROOM_STAGE_SENDING_CARD?((0,a.uX)(),(0,a.CE)("div",q,[(0,a.bF)((0,n.R1)(W.fg),{size:"large"},{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(W.S2),{disabled:Ne.operator_now?.user?.id!==Ne.self?.user?.id,onClick:r[4]||(r[4]=e=>O(w()))},{default:(0,a.k6)((()=>r[11]||(r[11]=[(0,a.eW)("出牌")]))),_:1},8,["disabled"]),(0,a.bF)((0,n.R1)(W.S2),{disabled:Ne.operator_now?.user?.id!==Ne.self?.user?.id,onClick:g},{default:(0,a.k6)((()=>r[12]||(r[12]=[(0,a.eW)("不出牌")]))),_:1},8,["disabled"])])),_:1})])):(0,a.Q3)("",!0)])),_:1})])),_:1}),(0,a.bF)((0,n.R1)(D.S2),null,{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(G.uD),null,{default:(0,a.k6)((()=>r[13]||(r[13]=[(0,a.Lk)("div",{id:"svg_self_cards"},null,-1)]))),_:1})])),_:1})])),_:1})])),_:1})]))],64)}}});const Q=J;var ee=Q,re=(0,a.pM)({__name:"RoomDetailView",setup(e){const r=(0,o.lq)(),t=String(r.params.id);return(e,r)=>((0,a.uX)(),(0,a.Wv)(a.tY,null,{default:(0,a.k6)((()=>[(0,a.bF)(ee,{room_hash:(0,n.R1)(t)},null,8,["room_hash"])])),fallback:(0,a.k6)((()=>r[0]||(r[0]=[(0,a.Lk)("p",null,"loading...",-1)]))),_:1}))}});const te=re;var ae=te}}]);
//# sourceMappingURL=785.4ca810ff.js.map